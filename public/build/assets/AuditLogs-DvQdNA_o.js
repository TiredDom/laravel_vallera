import{c as n,a as t,o as r,j as B,y as F,r as S,b as d,u as i,h as H,w as x,l as T,t as l,p as f,v as _,q as y,F as b,m as h,k,s as w,g as I,d as E,x as O}from"./app-BneOeZxG.js";import{r as z}from"./ArrowLeftIcon--GPJPAVD.js";import{r as G}from"./ClockIcon-CXW7aFnF.js";import{r as P}from"./EyeIcon-BEvUSr1s.js";import{Y,h as D,G as Z,S as q}from"./transition-B9ZbhP2-.js";function J(g,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function K(g,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const Q={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},R={class:"bg-white border-b border-slate-200 shadow-sm"},W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},X={class:"flex items-center justify-between"},tt={class:"flex items-center gap-4"},et={class:"flex items-center gap-2 px-4 py-2 bg-slate-50 rounded-lg border border-slate-200"},st={class:"text-sm font-medium text-slate-700"},lt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ot={class:"bg-white rounded-xl shadow-lg border border-slate-200 p-6 mb-6","data-aos":"fade-up"},at={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4"},rt={class:"xl:col-span-2"},nt={class:"relative"},it=["value"],dt=["value"],ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},ct={class:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden","data-aos":"fade-up","data-aos-delay":"100"},pt={class:"overflow-x-auto"},mt={class:"w-full"},xt={class:"divide-y divide-slate-200"},ft={class:"px-6 py-4 whitespace-nowrap"},bt={class:"text-sm font-medium text-slate-900"},gt={class:"text-xs text-slate-500"},vt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"flex items-center"},wt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm"},_t={class:"ml-3"},yt={class:"text-sm font-medium text-slate-900"},kt={class:"text-xs text-slate-500"},At={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"px-6 py-4"},St={class:"text-sm text-slate-900 max-w-md truncate"},Tt={class:"px-6 py-4 whitespace-nowrap"},Dt={class:"text-sm text-slate-600 font-mono"},Lt={class:"px-6 py-4 whitespace-nowrap text-center"},Ut=["onClick"],jt={key:0},Vt={colspan:"6",class:"px-6 py-12 text-center"},$t={key:0,class:"px-6 py-4 border-t border-slate-200 bg-slate-50"},Mt={class:"flex items-center justify-between"},Nt={class:"text-sm text-slate-600"},Bt={class:"flex gap-2"},Ft=["innerHTML"],Ht={class:"fixed inset-0 overflow-y-auto"},It={class:"flex min-h-full items-center justify-center p-4"},Et={key:0,class:"p-6 space-y-4"},Ot={class:"grid grid-cols-2 gap-4"},zt={class:"text-slate-900 font-mono"},Gt={class:"text-slate-900"},Pt={class:"text-slate-900"},Yt={class:"text-slate-900 font-mono"},Zt={class:"text-slate-900"},qt={class:"col-span-2"},Jt={class:"text-slate-900 mt-1"},Kt={class:"px-6 py-4 bg-slate-50 rounded-b-xl flex justify-end"},se={__name:"AuditLogs",props:{logs:Object,users:Array,actionTypes:Array,filters:Object},setup(g){const u=g,c=B(()=>!u.logs||!u.logs.data?{data:[],total:0,from:0,to:0,links:[]}:u.logs),a=F({search:u.filters?.search||"",user_id:u.filters?.user_id||"",action:u.filters?.action||"",date_from:u.filters?.date_from||"",date_to:u.filters?.date_to||"",per_page:u.filters?.per_page||50}),v=S(!1),p=S(null);let A=null;const L=()=>{clearTimeout(A),A=setTimeout(()=>{m()},500)},m=()=>{I.get("/admin/logs",a,{preserveState:!0,preserveScroll:!0})},U=()=>{Object.keys(a).forEach(o=>{o==="per_page"?a[o]=50:a[o]=""}),m()},j=o=>{p.value=o,v.value=!0},V=o=>new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),$=o=>new Date(o).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),M=o=>new Date(o).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),N=o=>o?.name?o.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"S",C=o=>{const e="inline-flex items-center px-2.5 py-1 text-xs font-semibold rounded-full",s=o?.toLowerCase()||"";return s.includes("create")||s.includes("add")?`${e} bg-green-100 text-green-800`:s.includes("update")||s.includes("edit")?`${e} bg-blue-100 text-blue-800`:s.includes("delete")||s.includes("remove")?`${e} bg-red-100 text-red-800`:s.includes("login")||s.includes("logout")?`${e} bg-purple-100 text-purple-800`:`${e} bg-slate-100 text-slate-800`};return(o,e)=>(r(),n(b,null,[d(i(H),{title:"Audit Logs"}),t("div",Q,[t("div",R,[t("div",W,[t("div",X,[t("div",tt,[d(i(T),{href:"/admin/dashboard",class:"p-2 hover:bg-slate-100 rounded-lg transition-colors"},{default:x(()=>[d(i(z),{class:"w-6 h-6 text-slate-600"})]),_:1}),e[8]||(e[8]=t("div",null,[t("h1",{class:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent"}," Audit Logs "),t("p",{class:"mt-1 text-slate-600"},"Monitor all system activities and user actions")],-1))]),t("div",et,[d(i(G),{class:"w-5 h-5 text-slate-400"}),t("span",st,"Total Logs: "+l(c.value.total||0),1)])])])]),t("div",lt,[t("div",ot,[t("div",at,[t("div",rt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Search",-1)),t("div",nt,[d(i(K),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.search=s),type:"text",placeholder:"Search descriptions...",class:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onInput:L},null,544),[[_,a.search]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"User",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.user_id=s),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:m},[e[10]||(e[10]=t("option",{value:""},"All Users",-1)),(r(!0),n(b,null,h(g.users,s=>(r(),n("option",{key:s.id,value:s.id},l(s.name),9,it))),128))],544),[[y,a.user_id]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Action",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.action=s),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:m},[e[12]||(e[12]=t("option",{value:""},"All Actions",-1)),(r(!0),n(b,null,h(g.actionTypes,s=>(r(),n("option",{key:s,value:s},l(s),9,dt))),128))],544),[[y,a.action]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Show",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.per_page=s),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:m},[...e[14]||(e[14]=[t("option",{value:25},"25",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)])],544),[[y,a.per_page]])])]),t("div",ut,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"From Date",-1)),f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.date_from=s),type:"date",class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:m},null,544),[[_,a.date_from]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"To Date",-1)),f(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.date_to=s),type:"date",class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:m},null,544),[[_,a.date_to]])])]),t("div",{class:"mt-4 flex justify-end"},[t("button",{onClick:U,class:"px-4 py-2 text-sm font-medium text-slate-700 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors"}," Clear Filters ")])]),t("div",ct,[t("div",pt,[t("table",mt,[e[21]||(e[21]=t("thead",{class:"bg-gradient-to-r from-slate-50 to-slate-100 border-b border-slate-200"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Timestamp "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," User "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Action "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Description "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," IP Address "),t("th",{class:"px-6 py-4 text-center text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Details ")])],-1)),t("tbody",xt,[(r(!0),n(b,null,h(c.value.data,s=>(r(),n("tr",{key:s.id,class:"hover:bg-slate-50 transition-colors"},[t("td",ft,[t("div",bt,l(V(s.created_at)),1),t("div",gt,l($(s.created_at)),1)]),t("td",vt,[t("div",ht,[t("div",wt,l(N(s.user)),1),t("div",_t,[t("div",yt,l(s.user?.name||"System"),1),t("div",kt,l(s.user?.email||"N/A"),1)])])]),t("td",At,[t("span",{class:w(C(s.action))},l(s.action),3)]),t("td",Ct,[t("div",St,l(s.description),1)]),t("td",Tt,[t("div",Dt,l(s.ip_address||"N/A"),1)]),t("td",Lt,[t("button",{onClick:Qt=>j(s),class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"},[d(i(P),{class:"w-4 h-4 mr-1"}),e[18]||(e[18]=E(" View ",-1))],8,Ut)])]))),128)),!c.value.data||c.value.data.length===0?(r(),n("tr",jt,[t("td",Vt,[d(i(J),{class:"mx-auto w-12 h-12 text-slate-400 mb-4"}),e[19]||(e[19]=t("p",{class:"text-slate-600 font-medium"},"No audit logs found",-1)),e[20]||(e[20]=t("p",{class:"text-slate-500 text-sm mt-2"},"Try adjusting your filters",-1))])])):k("",!0)])])]),c.value.data&&c.value.data.length>0?(r(),n("div",$t,[t("div",Mt,[t("div",Nt," Showing "+l(c.value.from)+" to "+l(c.value.to)+" of "+l(c.value.total)+" results ",1),t("div",Bt,[(r(!0),n(b,null,h(c.value.links,s=>(r(),n(b,{key:s.label},[s.url?(r(),O(i(T),{key:0,href:s.url,class:w(["px-4 py-2 text-sm font-medium rounded-lg transition-all",s.active?"bg-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-slate-700 hover:bg-slate-100 border border-slate-300"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(r(),n("span",{key:1,class:w("px-4 py-2 text-sm font-medium rounded-lg transition-all bg-slate-100 text-slate-400 cursor-not-allowed"),innerHTML:s.label},null,8,Ft))],64))),128))])])])):k("",!0)])])]),d(i(q),{show:v.value,as:"template"},{default:x(()=>[d(i(Y),{onClose:e[7]||(e[7]=s=>v.value=!1),class:"relative z-50"},{default:x(()=>[d(i(D),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:x(()=>[...e[22]||(e[22]=[t("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),t("div",Ht,[t("div",It,[d(i(D),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:x(()=>[d(i(Z),{class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl"},{default:x(()=>[e[30]||(e[30]=t("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 rounded-t-xl"},[t("h3",{class:"text-lg font-semibold text-white"},"Audit Log Details")],-1)),p.value?(r(),n("div",Et,[t("div",Ot,[t("div",null,[e[23]||(e[23]=t("label",{class:"text-sm font-medium text-slate-600"},"ID",-1)),t("p",zt,l(p.value.id),1)]),t("div",null,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-slate-600"},"Action",-1)),t("p",null,[t("span",{class:w(C(p.value.action))},l(p.value.action),3)])]),t("div",null,[e[25]||(e[25]=t("label",{class:"text-sm font-medium text-slate-600"},"User",-1)),t("p",Gt,l(p.value.user?.name||"System"),1)]),t("div",null,[e[26]||(e[26]=t("label",{class:"text-sm font-medium text-slate-600"},"Email",-1)),t("p",Pt,l(p.value.user?.email||"N/A"),1)]),t("div",null,[e[27]||(e[27]=t("label",{class:"text-sm font-medium text-slate-600"},"IP Address",-1)),t("p",Yt,l(p.value.ip_address||"N/A"),1)]),t("div",null,[e[28]||(e[28]=t("label",{class:"text-sm font-medium text-slate-600"},"Timestamp",-1)),t("p",Zt,l(M(p.value.created_at)),1)]),t("div",qt,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-slate-600"},"Description",-1)),t("p",Jt,l(p.value.description),1)])])])):k("",!0),t("div",Kt,[t("button",{onClick:e[6]||(e[6]=s=>v.value=!1),class:"px-4 py-2 text-sm font-medium text-slate-700 bg-white hover:bg-slate-100 rounded-lg border border-slate-300 transition-colors"}," Close ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}};export{se as default};
