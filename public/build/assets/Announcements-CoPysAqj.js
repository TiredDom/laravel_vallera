import{c as m,a as e,b as x,w as g,u as r,l as N,o as i,t as f,f as h,F as C,g as U,n as A,i as T,j as E,k as F,m as P,p as k,v as _,q as V,d as H,r as z,e as Y,s as S,x as G,y as $,h as W}from"./app-GKyMU9YN.js";import{Y as L,h as B,G as R,S as I}from"./transition-DC3scIWI.js";const J={class:"bg-white border-b border-slate-200 shadow-sm"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},Q={class:"flex flex-col gap-3"},X={class:"flex items-center gap-3 sm:gap-4"},Z={class:"flex items-center gap-2 sm:gap-3"},ee={__name:"AnnouncementsHeader",emits:["refresh","create"],setup(l){return(v,t)=>(i(),m("div",J,[e("div",K,[e("div",Q,[e("div",X,[x(r(N),{href:"/admin/dashboard",class:"p-2 hover:bg-slate-100 rounded-lg transition-colors flex-shrink-0"},{default:g(()=>[...t[2]||(t[2]=[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),t[3]||(t[3]=e("div",{class:"min-w-0 flex-1"},[e("h1",{class:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent"}," Announcements "),e("p",{class:"mt-1 text-sm sm:text-base text-slate-600"},"Create and manage announcements")],-1))]),e("div",Z,[e("button",{onClick:t[0]||(t[0]=c=>v.$emit("refresh")),class:"flex-1 sm:flex-none px-3 py-2 sm:px-4 sm:py-2 bg-white text-slate-700 border border-slate-300 rounded-lg font-semibold hover:bg-slate-50 transition-all shadow hover:shadow-md flex items-center justify-center gap-2 text-sm sm:text-base",title:"Refresh announcements"},[...t[4]||(t[4]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),e("span",{class:"hidden sm:inline"},"Refresh",-1)])]),e("button",{onClick:t[1]||(t[1]=c=>v.$emit("create")),class:"flex-1 sm:flex-none px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-blue-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"},[...t[5]||(t[5]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"New",-1)])])])])])]))}},te={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6","data-aos":"fade-up"},se={class:"bg-white rounded-xl shadow-lg border-2 border-amber-200 p-6"},ne={class:"flex items-center justify-between"},oe={class:"text-3xl font-bold text-amber-600"},le={class:"bg-white rounded-xl shadow-lg border-2 border-green-200 p-6"},re={class:"flex items-center justify-between"},ae={class:"text-3xl font-bold text-green-600"},ie={class:"bg-white rounded-xl shadow-lg border-2 border-blue-200 p-6"},de={class:"flex items-center justify-between"},ue={class:"text-3xl font-bold text-blue-600"},me={class:"bg-white rounded-xl shadow-lg border-2 border-red-200 p-6"},ce={class:"flex items-center justify-between"},pe={class:"text-3xl font-bold text-red-600"},be={__name:"AnnouncementsStats",props:{pendingCount:Number,publishedCount:Number,approvedCount:Number,rejectedCount:Number},setup(l){return(v,t)=>(i(),m("div",te,[e("div",se,[e("div",ne,[e("div",null,[e("p",oe,f(l.pendingCount),1),t[0]||(t[0]=e("p",{class:"text-sm text-slate-600 mt-1 font-medium"},"Pending",-1))]),t[1]||(t[1]=e("div",{class:"p-3 bg-amber-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",le,[e("div",re,[e("div",null,[e("p",ae,f(l.publishedCount),1),t[2]||(t[2]=e("p",{class:"text-sm text-slate-600 mt-1 font-medium"},"Published",-1))]),t[3]||(t[3]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))])]),e("div",ie,[e("div",de,[e("div",null,[e("p",ue,f(l.approvedCount),1),t[4]||(t[4]=e("p",{class:"text-sm text-slate-600 mt-1 font-medium"},"Approved",-1))]),t[5]||(t[5]=e("div",{class:"p-3 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),e("div",me,[e("div",ce,[e("div",null,[e("p",pe,f(l.rejectedCount),1),t[6]||(t[6]=e("p",{class:"text-sm text-slate-600 mt-1 font-medium"},"Rejected",-1))]),t[7]||(t[7]=e("div",{class:"p-3 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1))])])]))}},xe={class:"space-y-4","data-aos":"fade-up","data-aos-delay":"100"},ve={class:"flex items-start justify-between"},fe={class:"flex-1"},ge={class:"flex items-center gap-3 mb-2"},we={class:"text-xl font-bold text-slate-900"},he={class:"text-slate-700 mb-3"},ye={class:"flex items-center gap-4 text-sm text-slate-500"},ke={class:"flex items-center gap-1"},$e={class:"flex items-center gap-1"},Ce={class:"flex items-center gap-1"},je={key:0,class:"flex items-center gap-1 text-amber-600"},Me={class:"flex items-center gap-2 ml-4"},Ae=["onClick"],Se=["onClick"],Be=["onClick"],De={key:0,class:"bg-white rounded-xl shadow-lg border border-slate-200 p-12 text-center"},_e={key:0,class:"mt-6 flex justify-center"},ze={class:"flex gap-2"},Te=["innerHTML"],Ue={__name:"AnnouncementsList",props:{announcements:Object,isSuperAdmin:Boolean,currentUserId:Number},emits:["review","delete","create"],setup(l,{emit:v}){const t=l,c=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),a=d=>({all:"All Users",admins:"Admins Only",users:"Regular Users"})[d]||d,y=d=>{const n="inline-flex items-center px-2.5 py-1 text-xs font-bold rounded-full";return{pending:`${n} bg-amber-100 text-amber-800`,published:`${n} bg-green-100 text-green-800`,approved:`${n} bg-blue-100 text-blue-800`,rejected:`${n} bg-red-100 text-red-800`}[d]||n},w=d=>{const n="inline-flex items-center px-2.5 py-1 text-xs font-semibold rounded-full";return{info:`${n} bg-blue-50 text-blue-700`,warning:`${n} bg-amber-50 text-amber-700`,success:`${n} bg-green-50 text-green-700`,danger:`${n} bg-red-50 text-red-700`}[d]||n},s=d=>({info:"border-blue-500 bg-blue-50",warning:"border-amber-500 bg-amber-50",success:"border-green-500 bg-green-50",danger:"border-red-500 bg-red-50"})[d]||"border-slate-500 bg-slate-50",b=d=>t.isSuperAdmin?!0:d.created_by===t.currentUserId;return(d,n)=>(i(),m(C,null,[e("div",xe,[(i(!0),m(C,null,U(l.announcements.data,o=>{var j;return i(),m("div",{key:o.id,class:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden hover:shadow-xl transition-shadow"},[e("div",{class:A(["px-6 py-4 border-l-4",s(o.type)])},[e("div",ve,[e("div",fe,[e("div",ge,[e("h3",we,f(o.title),1),e("span",{class:A(y(o.status))},f(o.status),3),e("span",{class:A(w(o.type))},f(o.type),3)]),e("p",he,f(o.message),1),e("div",ye,[e("div",ke,[n[1]||(n[1]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",null,f((j=o.creator)==null?void 0:j.name),1)]),e("div",$e,[n[2]||(n[2]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",null,f(a(o.target_audience)),1)]),e("div",Ce,[n[3]||(n[3]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,f(c(o.created_at)),1)]),o.expires_at?(i(),m("div",je,[n[4]||(n[4]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,"Expires "+f(c(o.expires_at)),1)])):h("",!0)])]),e("div",Me,[l.isSuperAdmin&&o.status==="pending"?(i(),m("button",{key:0,onClick:M=>d.$emit("review",o,"approved"),class:"px-3 py-1.5 bg-green-100 text-green-700 rounded-lg text-sm font-semibold hover:bg-green-200 transition-colors"}," Approve ",8,Ae)):h("",!0),l.isSuperAdmin&&o.status==="pending"?(i(),m("button",{key:1,onClick:M=>d.$emit("review",o,"rejected"),class:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-sm font-semibold hover:bg-red-200 transition-colors"}," Reject ",8,Se)):h("",!0),b(o)?(i(),m("button",{key:2,onClick:M=>d.$emit("delete",o),class:"px-3 py-1.5 bg-red-100 text-red-700 rounded-lg text-sm font-semibold hover:bg-red-200 transition-colors"}," Delete ",8,Be)):h("",!0)])])],2)])}),128)),!l.announcements.data||l.announcements.data.length===0?(i(),m("div",De,[n[5]||(n[5]=e("svg",{class:"mx-auto w-16 h-16 text-slate-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})],-1)),n[6]||(n[6]=e("p",{class:"text-slate-600 font-medium text-lg"},"No announcements yet",-1)),n[7]||(n[7]=e("p",{class:"text-slate-500 text-sm mt-2"},"Create your first announcement to notify users",-1)),e("button",{onClick:n[0]||(n[0]=o=>d.$emit("create")),class:"mt-4 px-6 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-blue-700 transition-all"}," Create Announcement ")])):h("",!0)]),l.announcements.data&&l.announcements.data.length>0?(i(),m("div",_e,[e("div",ze,[(i(!0),m(C,null,U(l.announcements.links,o=>(i(),m(C,{key:o.label},[o.url?(i(),T(r(N),{key:0,href:o.url,class:A(["px-4 py-2 text-sm font-medium rounded-lg transition-all",o.active?"bg-cyan-600 text-white shadow-lg":"bg-white text-slate-700 hover:bg-slate-100 border border-slate-300"]),innerHTML:o.label},null,8,["href","class","innerHTML"])):(i(),m("span",{key:1,class:"px-4 py-2 text-sm font-medium rounded-lg bg-slate-100 text-slate-400 cursor-not-allowed",innerHTML:o.label},null,8,Te))],64))),128))])])):h("",!0)],64))}},Ve={class:"fixed inset-0 overflow-y-auto"},He={class:"flex min-h-full items-center justify-center p-4"},Ne={class:"grid grid-cols-2 gap-4"},Le={key:0,class:"bg-amber-50 border border-amber-200 rounded-lg p-4"},Re={class:"flex items-center justify-end gap-3 pt-4 border-t border-slate-200"},Ie=["disabled"],qe={__name:"CreateAnnouncementModal",props:{show:Boolean,isSuperAdmin:Boolean},emits:["close","success"],setup(l,{emit:v}){const t=l,c=v,a=E({title:"",message:"",type:"info",target_audience:"all",expires_at:""});F(()=>t.show,w=>{w||a.reset()});const y=()=>{a.post("/admin/announcements",{preserveScroll:!0,preserveState:!0,onSuccess:()=>{c("success"),c("close")}})};return(w,s)=>(i(),T(r(I),{show:l.show,as:"template"},{default:g(()=>[x(r(L),{onClose:s[6]||(s[6]=b=>w.$emit("close")),class:"relative z-50"},{default:g(()=>[x(r(B),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:g(()=>[...s[7]||(s[7]=[e("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),e("div",Ve,[e("div",He,[x(r(B),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:g(()=>[x(r(R),{class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl"},{default:g(()=>[s[16]||(s[16]=e("div",{class:"bg-gradient-to-r from-cyan-600 to-blue-600 px-6 py-4 rounded-t-xl"},[e("h3",{class:"text-lg font-semibold text-white"},"Create New Announcement")],-1)),e("form",{onSubmit:P(y,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-2"},"Title",-1)),k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=b=>r(a).title=b),type:"text",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",placeholder:"Enter announcement title"},null,512),[[_,r(a).title]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-2"},"Message",-1)),k(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=b=>r(a).message=b),rows:"4",required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all",placeholder:"Enter announcement message"},null,512),[[_,r(a).message]])]),e("div",Ne,[e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-2"},"Type",-1)),k(e("select",{"onUpdate:modelValue":s[2]||(s[2]=b=>r(a).type=b),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"},[...s[10]||(s[10]=[e("option",{value:"info"},"Info",-1),e("option",{value:"warning"},"Warning",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"danger"},"Danger",-1)])],512),[[V,r(a).type]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-2"},"Target Audience",-1)),k(e("select",{"onUpdate:modelValue":s[3]||(s[3]=b=>r(a).target_audience=b),required:"",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"},[...s[12]||(s[12]=[e("option",{value:"all"},"All Users",-1),e("option",{value:"admins"},"Admins Only",-1),e("option",{value:"users"},"Regular Users",-1)])],512),[[V,r(a).target_audience]])])]),e("div",null,[s[14]||(s[14]=e("label",{class:"block text-sm font-semibold text-slate-700 mb-2"},"Expiration Date (Optional)",-1)),k(e("input",{"onUpdate:modelValue":s[4]||(s[4]=b=>r(a).expires_at=b),type:"datetime-local",class:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-transparent transition-all"},null,512),[[_,r(a).expires_at]])]),l.isSuperAdmin?h("",!0):(i(),m("div",Le,[...s[15]||(s[15]=[e("div",{class:"flex items-start gap-3"},[e("svg",{class:"w-5 h-5 text-amber-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("div",null,[e("p",{class:"text-sm font-semibold text-amber-900"},"Approval Required"),e("p",{class:"text-sm text-amber-700 mt-1"},"Your announcement will be submitted for super admin approval before being published.")])],-1)])])),e("div",Re,[e("button",{type:"button",onClick:s[5]||(s[5]=b=>w.$emit("close")),class:"px-4 py-2 text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg font-medium transition-colors"}," Cancel "),e("button",{type:"submit",disabled:r(a).processing,class:"px-6 py-2 bg-gradient-to-r from-cyan-600 to-blue-600 text-white rounded-lg font-semibold hover:from-cyan-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},f(r(a).processing?"Creating...":l.isSuperAdmin?"Publish":"Submit"),9,Ie)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},Oe={class:"fixed inset-0 overflow-y-auto"},Ee={class:"flex min-h-full items-center justify-center p-4"},Fe={class:"p-6"},Pe={class:"flex items-start gap-4"},Ye={class:"flex-1"},Ge={class:"text-slate-600 mb-3"},We={class:"font-semibold"},Je={class:"px-6 py-4 bg-slate-50 rounded-b-xl flex items-center justify-end gap-3"},Ke={__name:"DeleteAnnouncementModal",props:{show:Boolean,announcement:Object},emits:["close","confirm"],setup(l){return(v,t)=>(i(),T(r(I),{show:l.show,as:"template"},{default:g(()=>[x(r(L),{onClose:t[2]||(t[2]=c=>v.$emit("close")),class:"relative z-50"},{default:g(()=>[x(r(B),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:g(()=>[...t[3]||(t[3]=[e("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),e("div",Oe,[e("div",Ee,[x(r(B),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:g(()=>[x(r(R),{class:"w-full max-w-md bg-white rounded-xl shadow-2xl"},{default:g(()=>{var c;return[t[9]||(t[9]=e("div",{class:"bg-gradient-to-r from-red-600 to-rose-600 px-6 py-4 rounded-t-xl"},[e("h3",{class:"text-lg font-semibold text-white"},"Delete Announcement")],-1)),e("div",Fe,[e("div",Pe,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])],-1)),e("div",Ye,[t[6]||(t[6]=e("h4",{class:"text-lg font-semibold text-slate-900 mb-2"},"Are you sure?",-1)),e("p",Ge,[t[4]||(t[4]=H(' Do you really want to delete "',-1)),e("span",We,f((c=l.announcement)==null?void 0:c.title),1),t[5]||(t[5]=H('"? ',-1))]),t[7]||(t[7]=e("p",{class:"text-sm text-slate-500"}," This action cannot be undone. The announcement will be permanently removed. ",-1))])])]),e("div",Je,[e("button",{type:"button",onClick:t[0]||(t[0]=a=>v.$emit("close")),class:"px-4 py-2 text-slate-700 bg-white hover:bg-slate-100 rounded-lg font-medium border border-slate-300 transition-colors"}," Cancel "),e("button",{type:"button",onClick:t[1]||(t[1]=a=>v.$emit("confirm")),class:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors"}," Delete ")])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},Qe={class:"min-h-screen bg-gradient-to-br from-slate-50 via-cyan-50 to-blue-50"},Xe={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ze={key:0},st={__name:"Announcements",props:{announcements:Object,isSuperAdmin:Boolean},setup(l){const v=l,t=z(!1),c=z(!1),a=z(null);let y=null;Y(()=>{y=setInterval(()=>{S.reload({only:["announcements"],preserveScroll:!0,preserveState:!0})},1e4)}),G(()=>{y&&clearInterval(y)});const w=()=>{S.reload({only:["announcements"],preserveScroll:!0,preserveState:!0})},s=$(()=>!v.announcements||!v.announcements.data?{data:[],links:[],total:0}:v.announcements),b=$(()=>{var p;return((p=s.value.data)==null?void 0:p.filter(u=>u.status==="pending").length)||0}),d=$(()=>{var p;return((p=s.value.data)==null?void 0:p.filter(u=>u.status==="published").length)||0}),n=$(()=>{var p;return((p=s.value.data)==null?void 0:p.filter(u=>u.status==="approved").length)||0}),o=$(()=>{var p;return((p=s.value.data)==null?void 0:p.filter(u=>u.status==="rejected").length)||0}),j=(p,u)=>{S.post(`/admin/announcements/${p.id}/review`,{status:u},{preserveScroll:!0,preserveState:!0})},M=p=>{a.value=p,c.value=!0},q=()=>{a.value&&S.delete(`/admin/announcements/${a.value.id}`,{preserveScroll:!0,preserveState:!0,onFinish:()=>{c.value=!1,a.value=null}})},O=()=>{t.value=!1};return(p,u)=>(i(),m(C,null,[x(r(W),{title:"Announcements"}),e("div",Qe,[x(ee,{onRefresh:w,onCreate:u[0]||(u[0]=D=>t.value=!0)}),e("div",Xe,[l.isSuperAdmin?(i(),m("div",Ze,[x(be,{"pending-count":b.value,"published-count":d.value,"approved-count":n.value,"rejected-count":o.value},null,8,["pending-count","published-count","approved-count","rejected-count"])])):h("",!0),x(Ue,{announcements:s.value,"is-super-admin":l.isSuperAdmin,"current-user-id":l.announcements.currentUserId,onReview:j,onDelete:M,onCreate:u[1]||(u[1]=D=>t.value=!0)},null,8,["announcements","is-super-admin","current-user-id"])])]),x(qe,{show:t.value,"is-super-admin":l.isSuperAdmin,onClose:u[2]||(u[2]=D=>t.value=!1),onSuccess:O},null,8,["show","is-super-admin"]),x(Ke,{show:c.value,announcement:a.value,onClose:u[3]||(u[3]=D=>c.value=!1),onConfirm:q},null,8,["show","announcement"])],64))}};export{st as default};
