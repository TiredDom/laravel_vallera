import{y as F,c as x,a as e,t as b,o as p,F as j,r as U,n as G,e as L,g as Q,p as y,f as T,w,b as f,u as r,j as Y,k,v as $,m as J,d as V,G as D,i as N,E as de,h as ue,l as me,s as A}from"./app-B-e4HDZA.js";import{_ as ce}from"./ToastNotification-DGI2L2AT.js";import{Y as O,h as M,G as R,S as q}from"./transition-C13SGwAa.js";import{_ as pe}from"./ProductDetailModal-BHrYnDfG.js";import"./XMarkIcon-DkpJG58I.js";const fe={class:"grid grid-cols-2 lg:grid-cols-6 gap-3 sm:gap-4 mb-6","data-aos":"fade-up"},xe={class:"bg-white rounded-xl shadow-lg border-2 border-emerald-200 p-4 sm:p-6"},be={class:"flex items-center justify-between"},ge={class:"text-base sm:text-xl font-bold text-emerald-600"},ve={class:"bg-white rounded-xl shadow-lg border-2 border-blue-200 p-4 sm:p-6"},we={class:"flex items-center justify-between"},ye={class:"text-base sm:text-xl font-bold text-blue-600"},he={class:"bg-white rounded-xl shadow-lg border-2 border-amber-200 p-4 sm:p-6"},ke={class:"flex items-center justify-between"},$e={class:"text-base sm:text-xl font-bold text-amber-600"},Ce={class:"bg-white rounded-xl shadow-lg border-2 border-orange-200 p-4 sm:p-6"},Se={class:"flex items-center justify-between"},_e={class:"text-base sm:text-xl font-bold text-orange-600"},je={class:"bg-white rounded-xl shadow-lg border-2 border-red-200 p-4 sm:p-6"},Me={class:"flex items-center justify-between"},Pe={class:"text-base sm:text-xl font-bold text-red-600"},Be={class:"bg-white rounded-xl shadow-lg border-2 border-indigo-200 p-4 sm:p-6"},Ae={class:"flex items-center justify-between"},Fe={class:"text-base sm:text-xl font-bold text-indigo-600"},Le={__name:"ProductStats",props:{products:Array,featuredCount:Number},setup(d){const c=d,t=F(()=>c.products.reduce((g,i)=>g+i.stock,0)),l=F(()=>c.products.filter(g=>g.stock>0&&g.stock<10).length),a=F(()=>c.products.filter(g=>g.stock===0).length),h=F(()=>new Set(c.products.map(i=>i.category)).size);return(g,i)=>(p(),x("div",fe,[e("div",xe,[e("div",be,[e("div",null,[e("p",ge,b(d.products.length),1),i[0]||(i[0]=e("p",{class:"text-xs sm:text-sm text-slate-600 mt-1 font-medium"},"Total Products",-1))]),i[1]||(i[1]=e("div",{class:"p-2 sm:p-3 bg-emerald-100 rounded-lg"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1))])]),e("div",ve,[e("div",we,[e("div",null,[e("p",ye,b(d.featuredCount)+"/3",1),i[2]||(i[2]=e("p",{class:"text-xs sm:text-sm text-slate-600 mt-1 font-medium"},"Featured",-1))]),i[3]||(i[3]=e("div",{class:"p-2 sm:p-3 bg-blue-100 rounded-lg"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1))])]),e("div",he,[e("div",ke,[e("div",null,[e("p",$e,b(t.value),1),i[4]||(i[4]=e("p",{class:"text-xs sm:text-sm text-slate-600 mt-1 font-medium"},"Total Stock",-1))]),i[5]||(i[5]=e("div",{class:"p-2 sm:p-3 bg-amber-100 rounded-lg"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1))])]),e("div",Ce,[e("div",Se,[e("div",null,[e("p",_e,b(l.value),1),i[6]||(i[6]=e("p",{class:"text-xs sm:text-sm text-slate-600 mt-1 font-medium"},"Low Stock",-1))]),i[7]||(i[7]=e("div",{class:"p-2 sm:p-3 bg-orange-100 rounded-lg"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1))])]),e("div",je,[e("div",Me,[e("div",null,[e("p",Pe,b(a.value),1),i[8]||(i[8]=e("p",{class:"text-xs sm:text-sm text-slate-600 mt-1 font-medium"},"Sold Out",-1))]),i[9]||(i[9]=e("div",{class:"p-2 sm:p-3 bg-red-100 rounded-lg"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1))])]),e("div",Be,[e("div",Ae,[e("div",null,[e("p",Fe,b(h.value),1),i[10]||(i[10]=e("p",{class:"text-xs sm:text-sm text-slate-600 mt-1 font-medium"},"Active Categories",-1))]),i[11]||(i[11]=e("div",{class:"p-2 sm:p-3 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 7v4a1 1 0 001 1h3m10-5v4a1 1 0 01-1 1h-3m-4 4v4a1 1 0 001 1h3m10-5v4a1 1 0 01-1 1h-3"})])],-1))])])]))}},Ue={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},Ee={class:"flex flex-col sm:flex-row gap-2 w-full"},ze={class:"flex-1"},De={class:"relative"},Ve=["value"],Ne={class:"sm:w-64"},Te=["value"],Oe=["value"],Re={class:"sm:w-56"},qe=["value"],He=["value"],Ie={class:"flex items-center gap-2 mt-2 sm:mt-0"},Ge=["disabled"],Qe={class:"hidden sm:inline"},Ye={__name:"ProductFilters",props:{searchQuery:String,categoryFilter:String,sortBy:String,categories:Array,sortOptions:Array,isRefreshing:Boolean},emits:["update:searchQuery","update:categoryFilter","update:sortBy","refresh","add"],setup(d){return(c,t)=>(p(),x("div",Ue,[e("div",Ee,[e("div",ze,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Search",-1)),e("div",De,[t[5]||(t[5]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z"})],-1)),e("input",{value:d.searchQuery,onInput:t[0]||(t[0]=l=>c.$emit("update:searchQuery",l.target.value)),type:"text",placeholder:"Search products...",class:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"},null,40,Ve)])]),e("div",Ne,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Category",-1)),e("select",{value:d.categoryFilter,onChange:t[1]||(t[1]=l=>c.$emit("update:categoryFilter",l.target.value)),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all font-medium"},[t[7]||(t[7]=e("option",{value:"All"},"All Categories",-1)),(p(!0),x(j,null,U(d.categories,l=>(p(),x("option",{key:l,value:l},b(l),9,Oe))),128))],40,Te)]),e("div",Re,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Sort By",-1)),e("select",{value:d.sortBy,onChange:t[2]||(t[2]=l=>c.$emit("update:sortBy",l.target.value)),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all font-medium"},[(p(!0),x(j,null,U(d.sortOptions,l=>(p(),x("option",{key:l.value,value:l.value},b(l.label),9,He))),128))],40,qe)])]),e("div",Ie,[e("button",{onClick:t[3]||(t[3]=l=>c.$emit("refresh")),disabled:d.isRefreshing,class:"px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg font-semibold transition-all flex items-center gap-2 text-sm disabled:opacity-50",title:"Refresh stock data"},[(p(),x("svg",{class:G(["w-4 h-4",{"animate-spin":d.isRefreshing}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),e("span",Qe,b(d.isRefreshing?"Refreshing...":"Refresh"),1)],8,Ge),e("button",{onClick:t[4]||(t[4]=l=>c.$emit("add")),class:"px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-semibold hover:from-emerald-700 hover:to-teal-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-2 text-sm sm:text-base whitespace-nowrap"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),e("span",null,"Add Product",-1)])])])]))}},Je={class:"bg-white rounded-xl shadow-lg border border-slate-200","data-aos":"fade-up","data-aos-delay":"100"},We={class:"p-4 sm:p-6 space-y-4 sm:space-y-6"},Ke={class:"flex items-start gap-3 sm:gap-4 flex-1"},Xe={class:"w-20 h-20 sm:w-24 sm:h-24 rounded-lg overflow-hidden bg-slate-100 flex-shrink-0"},Ze=["src","alt"],et={key:1,class:"w-full h-full flex items-center justify-center text-slate-400"},tt={class:"flex-1 min-w-0"},st={class:"flex flex-wrap items-center gap-2 mb-1"},ot={class:"text-base sm:text-lg font-bold text-slate-900 truncate"},lt={key:0,class:"px-2 py-0.5 text-xs font-bold rounded-full bg-amber-100 text-amber-700 whitespace-nowrap"},rt={key:1,class:"px-2 py-0.5 text-xs font-bold rounded-full bg-red-100 text-red-700 whitespace-nowrap"},at={class:"text-xs sm:text-sm text-slate-600 mb-2 line-clamp-2"},nt={class:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs sm:text-sm"},it={class:"font-semibold text-emerald-600 whitespace-nowrap"},dt={class:"flex items-center gap-1.5 whitespace-nowrap"},ut={class:"px-2 py-0.5 rounded-md text-xs font-semibold bg-slate-100 text-slate-700 whitespace-nowrap"},mt={class:"flex items-center gap-2 sm:flex-col sm:gap-2 justify-end sm:justify-center"},ct=["onClick"],pt=["onClick"],ft=["onClick"],xt={key:0,class:"text-center py-12"},bt={__name:"ProductList",props:{products:Array},emits:["preview","edit","delete","add"],setup(d){return(c,t)=>(p(),x("div",Je,[e("div",We,[(p(!0),x(j,null,U(d.products,l=>(p(),x("div",{key:l.id,class:"flex flex-col sm:flex-row sm:items-center gap-4 p-4 border-2 border-slate-200 rounded-xl hover:border-emerald-300 hover:shadow-md transition-all"},[e("div",Ke,[e("div",Xe,[l.image_url?(p(),x("img",{key:0,src:l.image_url,alt:l.name,class:"w-full h-full object-cover"},null,8,Ze)):(p(),x("div",et,[...t[1]||(t[1]=[e("svg",{class:"w-6 h-6 sm:w-8 sm:h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])]))]),e("div",tt,[e("div",st,[e("h3",ot,b(l.name),1),l.is_featured?(p(),x("span",lt,"⭐ Featured")):L("",!0),l.is_active?L("",!0):(p(),x("span",rt,"Inactive"))]),e("p",at,b(l.description||"No description"),1),e("div",nt,[e("span",it,"₱"+b(Number(l.price).toLocaleString()),1),e("div",dt,[t[2]||(t[2]=e("span",{class:"text-slate-600 font-medium"},"Stock:",-1)),e("span",{class:G(["px-2 py-0.5 rounded-md font-bold",{"bg-red-100 text-red-700":l.stock===0,"bg-amber-100 text-amber-700":l.stock>0&&l.stock<10,"bg-emerald-100 text-emerald-700":l.stock>=10}])},b(l.stock),3)]),e("span",ut,b(l.category_name),1)])])]),e("div",mt,[e("button",{onClick:a=>c.$emit("preview",l),class:"flex-1 sm:flex-none sm:w-full px-3 py-2 bg-purple-100 text-purple-700 rounded-lg font-semibold hover:bg-purple-200 transition-colors text-xs sm:text-sm flex items-center justify-center gap-1 whitespace-nowrap"},[...t[3]||(t[3]=[e("svg",{class:"w-4 h-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",{class:"hidden sm:inline"},"Preview",-1)])],8,ct),e("button",{onClick:a=>c.$emit("edit",l),class:"flex-1 sm:flex-none sm:w-full px-3 py-2 bg-blue-100 text-blue-700 rounded-lg font-semibold hover:bg-blue-200 transition-colors text-xs sm:text-sm whitespace-nowrap"},"Edit",8,pt),e("button",{onClick:a=>c.$emit("delete",l),class:"flex-1 sm:flex-none sm:w-full px-3 py-2 bg-red-100 text-red-700 rounded-lg font-semibold hover:bg-red-200 transition-colors text-xs sm:text-sm whitespace-nowrap"},"Delete",8,ft)])]))),128)),d.products.length===0?(p(),x("div",xt,[t[4]||(t[4]=e("svg",{class:"mx-auto w-16 h-16 text-slate-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),t[5]||(t[5]=e("p",{class:"text-slate-600 font-medium text-lg"},"No products yet",-1)),t[6]||(t[6]=e("p",{class:"text-slate-500 text-sm mt-2"},"Create your first product to get started",-1)),e("button",{onClick:t[0]||(t[0]=l=>c.$emit("add")),class:"mt-4 px-6 py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-semibold hover:from-emerald-700 hover:to-teal-700 transition-all"},"Add Your First Product")])):L("",!0)])]))}},gt={class:"fixed inset-0 overflow-y-auto"},vt={class:"flex min-h-full items-center justify-center p-2 sm:p-4"},wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"},yt={class:"sm:col-span-2"},ht={class:"sm:col-span-2"},kt=["value"],$t={key:0,class:"sm:col-span-2"},Ct=["src"],St={class:"sm:col-span-2 flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4"},_t={class:"flex items-center gap-2"},jt={class:"flex items-center gap-2"},Mt={class:"flex flex-col-reverse sm:flex-row items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4 border-t border-slate-200"},Pt=["disabled"],Bt={__name:"AddProductModal",props:{show:Boolean,categoryOptions:Array},emits:["close","productAdded","toast"],setup(d,{emit:c}){const t=c,l=Q({name:"",description:"",price:0,stock:0,category:"",image:null,is_featured:!1,is_active:!0}),a=y(null);function h(i){const s=i.target.files[0];if(s){if(s.size>5242880){t("toast",{show:!0,message:"Image must be less than 5MB",type:"error"}),i.target.value="";return}l.image=s;const m=new FileReader;m.onload=C=>a.value=C.target.result,m.readAsDataURL(s)}}function g(){if(!l.image){t("toast",{show:!0,message:"Please upload a product image",type:"error"});return}l.post("/admin/products",{preserveScroll:!0,preserveState:!0,onSuccess:()=>{t("productAdded"),t("close"),l.reset(),a.value=null,t("toast",{show:!0,message:"Product created successfully",type:"success"})},onError:i=>{const s=Object.values(i)[0];t("toast",{show:!0,message:s||"Failed to create product",type:"error"})}})}return(i,s)=>(p(),T(r(q),{show:d.show,as:"template"},{default:w(()=>[f(r(O),{onClose:s[8]||(s[8]=o=>i.$emit("close")),class:"relative z-50"},{default:w(()=>[f(r(M),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>[...s[9]||(s[9]=[e("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),e("div",gt,[e("div",vt,[f(r(M),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:w(()=>[f(r(R),{class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl max-h-[95vh] overflow-y-auto"},{default:w(()=>[s[20]||(s[20]=e("div",{class:"bg-gradient-to-r from-emerald-600 to-teal-600 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl sticky top-0 z-10"},[e("h3",{class:"text-base sm:text-lg font-semibold text-white"},"Add New Product")],-1)),e("form",{onSubmit:Y(g,["prevent"]),class:"p-4 sm:p-6 space-y-3 sm:space-y-4"},[e("div",wt,[e("div",yt,[s[10]||(s[10]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Product Name",-1)),k(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>r(l).name=o),type:"text",required:"",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",placeholder:"Enter product name"},null,512),[[$,r(l).name]])]),e("div",ht,[s[11]||(s[11]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Description",-1)),k(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=o=>r(l).description=o),rows:"2",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",placeholder:"Enter product description"},null,512),[[$,r(l).description]])]),e("div",null,[s[12]||(s[12]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Price (₱)",-1)),k(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>r(l).price=o),type:"number",step:"0.01",required:"",min:"0",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",placeholder:"0.00"},null,512),[[$,r(l).price]])]),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Stock",-1)),k(e("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>r(l).stock=o),type:"number",required:"",min:"0",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all",placeholder:"0"},null,512),[[$,r(l).stock]])]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Category",-1)),k(e("select",{"onUpdate:modelValue":s[4]||(s[4]=o=>r(l).category=o),required:"",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all"},[s[14]||(s[14]=e("option",{value:""},"Select Category",-1)),(p(!0),x(j,null,U(d.categoryOptions,o=>(p(),x("option",{key:o,value:o},b(o),9,kt))),128))],512),[[J,r(l).category]])]),e("div",null,[s[16]||(s[16]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},[V(" Image "),e("span",{class:"text-red-500"},"*")],-1)),e("input",{type:"file",onChange:h,accept:"image/*",required:"",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-xs sm:text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all file:mr-2 file:py-1 file:px-3 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-emerald-50 file:text-emerald-700 hover:file:bg-emerald-100"},null,32),s[17]||(s[17]=e("p",{class:"text-xs text-slate-500 mt-1"},"JPG, PNG, or WEBP (max 5MB)",-1))]),a.value?(p(),x("div",$t,[e("img",{src:a.value,class:"w-full h-32 sm:h-48 object-cover rounded-lg border-2 border-slate-200",alt:"Preview"},null,8,Ct)])):L("",!0),e("div",St,[e("label",_t,[k(e("input",{"onUpdate:modelValue":s[5]||(s[5]=o=>r(l).is_featured=o),type:"checkbox",class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-600 border-slate-300 rounded focus:ring-emerald-500"},null,512),[[D,r(l).is_featured]]),s[18]||(s[18]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700"},"Featured (Max 3)",-1))]),e("label",jt,[k(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>r(l).is_active=o),type:"checkbox",class:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-600 border-slate-300 rounded focus:ring-emerald-500"},null,512),[[D,r(l).is_active]]),s[19]||(s[19]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700"},"Active",-1))])])]),e("div",Mt,[e("button",{type:"button",onClick:s[7]||(s[7]=o=>i.$emit("close")),class:"w-full sm:w-auto px-4 py-2 text-sm sm:text-base text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg font-medium transition-colors"},"Cancel"),e("button",{type:"submit",disabled:r(l).processing,class:"w-full sm:w-auto px-6 py-2 text-sm sm:text-base bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg font-semibold hover:from-emerald-700 hover:to-teal-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},b(r(l).processing?"Creating...":"Create Product"),9,Pt)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},At={class:"fixed inset-0 overflow-y-auto"},Ft={class:"flex min-h-full items-center justify-center p-2 sm:p-4"},Lt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4"},Ut={class:"sm:col-span-2"},Et={class:"sm:col-span-2"},zt=["value"],Dt={key:0,class:"sm:col-span-2"},Vt=["src"],Nt={class:"sm:col-span-2 flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4"},Tt={class:"flex items-center gap-2"},Ot={class:"flex items-center gap-2"},Rt={class:"flex flex-col-reverse sm:flex-row items-center justify-end gap-2 sm:gap-3 pt-3 sm:pt-4 border-t border-slate-200"},qt=["disabled"],Ht={__name:"EditProductModal",props:{show:Boolean,product:Object,categoryOptions:Array},emits:["close","productUpdated","toast"],setup(d,{emit:c}){const t=d,l=c,a=Q({id:null,name:"",description:"",price:0,stock:0,category:"",image:null,is_featured:!1,is_active:!0}),h=y(null);N(()=>t.product,s=>{s&&(a.id=s.id,a.name=s.name,a.description=s.description,a.price=s.price,a.stock=s.stock,a.category=s.category,a.is_featured=s.is_featured,a.is_active=s.is_active,h.value=s.image_url,a.image=null)});function g(s){const o=s.target.files[0];if(o){if(o.size>5242880){l("toast",{show:!0,message:"Image must be less than 5MB",type:"error"}),s.target.value="";return}a.image=o;const C=new FileReader;C.onload=P=>h.value=P.target.result,C.readAsDataURL(o)}}function i(){a.post(`/admin/products/${a.id}`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l("productUpdated"),l("close"),a.reset(),h.value=null,l("toast",{show:!0,message:"Product updated successfully",type:"success"})},onError:s=>{const o=Object.values(s)[0];l("toast",{show:!0,message:o||"Failed to update product",type:"error"})}})}return(s,o)=>(p(),T(r(q),{show:d.show,as:"template"},{default:w(()=>[f(r(O),{onClose:o[8]||(o[8]=m=>s.$emit("close")),class:"relative z-50"},{default:w(()=>[f(r(M),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>[...o[9]||(o[9]=[e("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),e("div",At,[e("div",Ft,[f(r(M),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:w(()=>[f(r(R),{class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl max-h-[95vh] overflow-y-auto"},{default:w(()=>[o[20]||(o[20]=e("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-600 px-4 sm:px-6 py-3 sm:py-4 rounded-t-xl sticky top-0 z-10"},[e("h3",{class:"text-base sm:text-lg font-semibold text-white"},"Edit Product")],-1)),e("form",{onSubmit:Y(i,["prevent"]),class:"p-4 sm:p-6 space-y-3 sm:space-y-4"},[e("div",Lt,[e("div",Ut,[o[10]||(o[10]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Product Name",-1)),k(e("input",{"onUpdate:modelValue":o[0]||(o[0]=m=>r(a).name=m),type:"text",required:"",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[$,r(a).name]])]),e("div",Et,[o[11]||(o[11]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Description",-1)),k(e("textarea",{"onUpdate:modelValue":o[1]||(o[1]=m=>r(a).description=m),rows:"2",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[$,r(a).description]])]),e("div",null,[o[12]||(o[12]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Price (₱)",-1)),k(e("input",{"onUpdate:modelValue":o[2]||(o[2]=m=>r(a).price=m),type:"number",step:"0.01",required:"",min:"0",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[$,r(a).price]])]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Stock",-1)),k(e("input",{"onUpdate:modelValue":o[3]||(o[3]=m=>r(a).stock=m),type:"number",required:"",min:"0",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},null,512),[[$,r(a).stock]])]),e("div",null,[o[15]||(o[15]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Category",-1)),k(e("select",{"onUpdate:modelValue":o[4]||(o[4]=m=>r(a).category=m),required:"",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-sm sm:text-base border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"},[o[14]||(o[14]=e("option",{value:""},"Select Category",-1)),(p(!0),x(j,null,U(d.categoryOptions,m=>(p(),x("option",{key:m,value:m},b(m),9,zt))),128))],512),[[J,r(a).category]])]),e("div",null,[o[16]||(o[16]=e("label",{class:"block text-xs sm:text-sm font-semibold text-slate-700 mb-1.5 sm:mb-2"},"Change Image",-1)),e("input",{type:"file",onChange:g,accept:"image/*",class:"w-full px-3 py-2 sm:px-4 sm:py-3 text-xs sm:text-sm border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all file:mr-2 file:py-1 file:px-3 file:rounded file:border-0 file:text-xs file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),o[17]||(o[17]=e("p",{class:"text-xs text-slate-500 mt-1"},"JPG, PNG, or WEBP (max 5MB)",-1))]),h.value?(p(),x("div",Dt,[e("img",{src:h.value,class:"w-full h-32 sm:h-48 object-cover rounded-lg border-2 border-slate-200",alt:"Preview"},null,8,Vt)])):L("",!0),e("div",Nt,[e("label",Tt,[k(e("input",{"onUpdate:modelValue":o[5]||(o[5]=m=>r(a).is_featured=m),type:"checkbox",class:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 border-slate-300 rounded focus:ring-blue-500"},null,512),[[D,r(a).is_featured]]),o[18]||(o[18]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700"},"Featured (Max 3)",-1))]),e("label",Ot,[k(e("input",{"onUpdate:modelValue":o[6]||(o[6]=m=>r(a).is_active=m),type:"checkbox",class:"w-4 h-4 sm:w-5 sm:h-5 text-blue-600 border-slate-300 rounded focus:ring-blue-500"},null,512),[[D,r(a).is_active]]),o[19]||(o[19]=e("span",{class:"text-xs sm:text-sm font-medium text-slate-700"},"Active",-1))])])]),e("div",Rt,[e("button",{type:"button",onClick:o[7]||(o[7]=m=>s.$emit("close")),class:"w-full sm:w-auto px-4 py-2 text-sm sm:text-base text-slate-700 bg-slate-100 hover:bg-slate-200 rounded-lg font-medium transition-colors"},"Cancel"),e("button",{type:"submit",disabled:r(a).processing,class:"w-full sm:w-auto px-6 py-2 text-sm sm:text-base bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},b(r(a).processing?"Saving...":"Save Changes"),9,qt)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},It={class:"fixed inset-0 overflow-y-auto"},Gt={class:"flex min-h-full items-center justify-center p-4"},Qt={class:"p-6"},Yt={class:"flex items-start gap-4"},Jt={class:"flex-1"},Wt={class:"text-slate-600 mb-3"},Kt={class:"font-semibold"},Xt={class:"px-6 py-4 bg-slate-50 rounded-b-xl flex items-center justify-end gap-3"},Zt=["disabled"],es={__name:"DeleteProductModal",props:{show:Boolean,product:Object,processing:Boolean},emits:["close","deleteConfirmed"],setup(d){return(c,t)=>(p(),T(r(q),{show:d.show,as:"template"},{default:w(()=>[f(r(O),{onClose:t[2]||(t[2]=l=>c.$emit("close")),class:"relative z-50"},{default:w(()=>[f(r(M),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>[...t[3]||(t[3]=[e("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),e("div",It,[e("div",Gt,[f(r(M),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:w(()=>[f(r(R),{class:"w-full max-w-md bg-white rounded-xl shadow-2xl"},{default:w(()=>{var l;return[t[9]||(t[9]=e("div",{class:"bg-gradient-to-r from-red-600 to-rose-600 px-6 py-4 rounded-t-xl"},[e("h3",{class:"text-lg font-semibold text-white"},"Delete Product")],-1)),e("div",Qt,[e("div",Yt,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])])],-1)),e("div",Jt,[t[6]||(t[6]=e("h4",{class:"text-lg font-semibold text-slate-900 mb-2"},"Are you sure?",-1)),e("p",Wt,[t[4]||(t[4]=V('Do you really want to delete "',-1)),e("span",Kt,b((l=d.product)==null?void 0:l.name),1),t[5]||(t[5]=V('"?',-1))]),t[7]||(t[7]=e("p",{class:"text-sm text-slate-500"},"This action cannot be undone. The product and its image will be permanently removed.",-1))])])]),e("div",Xt,[e("button",{type:"button",onClick:t[0]||(t[0]=a=>c.$emit("close")),class:"px-4 py-2 text-slate-700 bg-white hover:bg-slate-100 rounded-lg font-medium border border-slate-300 transition-colors"},"Cancel"),e("button",{type:"button",onClick:t[1]||(t[1]=a=>c.$emit("deleteConfirmed")),disabled:d.processing,class:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50"},b(d.processing?"Deleting...":"Delete"),9,Zt)])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}},ts={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},ss={class:"bg-white border-b border-slate-200 shadow-sm"},os={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},ls={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},rs={class:"flex items-center gap-3 sm:gap-4"},as={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},cs={__name:"Products",props:{products:Array,featuredCount:Number},setup(d){const c=d,t=["Sofas","Chairs","Tables","Beds","Storage","Desks","Lighting"],l=de(),a=y(!1),h=y(!1),g=y(!1),i=y(!1),s=y(null),o=y(null),m=y(!1),C=y(null),P=y(!1),B=y({show:!1,message:"",type:"success"}),E=y("All"),z=y(""),_=y("default"),W=[{value:"default",label:"Sort: Default"},{value:"price-asc",label:"Price: Low to High"},{value:"price-desc",label:"Price: High to Low"},{value:"stock-asc",label:"Stock: Low to High"},{value:"stock-desc",label:"Stock: High to Low"}];let H=null;const K=()=>{clearTimeout(H),H=setTimeout(()=>{},300)},X=F(()=>{let n=c.products;if(E.value!=="All"&&(n=n.filter(u=>u.category===E.value)),z.value){const u=z.value.toLowerCase();n=n.filter(v=>v.name.toLowerCase().includes(u)||v.description&&v.description.toLowerCase().includes(u))}return _.value==="price-asc"?n=[...n].sort((u,v)=>Number(u.price)-Number(v.price)):_.value==="price-desc"?n=[...n].sort((u,v)=>Number(v.price)-Number(u.price)):_.value==="stock-asc"?n=[...n].sort((u,v)=>u.stock-v.stock):_.value==="stock-desc"&&(n=[...n].sort((u,v)=>v.stock-u.stock)),n});N(()=>{var n;return(n=l.props.flash)==null?void 0:n.success},n=>{n&&S({message:n,type:"success"})}),N(()=>{var n;return(n=l.props.flash)==null?void 0:n.error},n=>{n&&S({message:n,type:"error"})});function S({message:n,type:u}){B.value={show:!0,message:n,type:u}}function Z(n){z.value=n,K()}function ee(n){E.value=n}function te(n){_.value=n}function se(){m.value=!0,A.reload({only:["products","featuredCount"],onFinish:()=>{m.value=!1,S({message:"Stock data refreshed",type:"success"})}})}function I(){a.value=!0}function oe(){a.value=!1,A.reload({only:["products","featuredCount"]})}function le(n){o.value=n,h.value=!0}function re(){h.value=!1,A.reload({only:["products","featuredCount"]})}function ae(n){C.value=n,i.value=!0}function ne(n){s.value=n,g.value=!0}function ie(){s.value&&(P.value=!0,A.delete(`/admin/products/${s.value.id}`,{preserveScroll:!0,preserveState:!0,onSuccess:()=>{S({message:"Product deleted successfully",type:"success"})},onError:n=>{const u=Object.values(n)[0];S({message:u||"Failed to delete product",type:"error"})},onFinish:()=>{g.value=!1,s.value=null,P.value=!1,A.reload({only:["products","featuredCount"]})}}))}return(n,u)=>(p(),x(j,null,[f(r(ue),{title:"Product Management"}),f(ce,{show:B.value.show,message:B.value.message,type:B.value.type,onClose:u[0]||(u[0]=v=>B.value.show=!1)},null,8,["show","message","type"]),e("div",ts,[e("div",ss,[e("div",os,[e("div",ls,[e("div",rs,[f(r(me),{href:"/admin/dashboard",class:"p-2 hover:bg-slate-100 rounded-lg transition-colors flex-shrink-0"},{default:w(()=>[...u[5]||(u[5]=[e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6 text-slate-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),u[6]||(u[6]=e("div",{class:"min-w-0"},[e("h1",{class:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent truncate"},"Product Management"),e("p",{class:"mt-1 text-sm sm:text-base text-slate-600"},"Manage your furniture catalog")],-1))]),f(Ye,{"search-query":z.value,"category-filter":E.value,"sort-by":_.value,categories:n.categories,"sort-options":W,"is-refreshing":m.value,"onUpdate:searchQuery":Z,"onUpdate:categoryFilter":ee,"onUpdate:sortBy":te,onRefresh:se,onAdd:I},null,8,["search-query","category-filter","sort-by","categories","is-refreshing"])])])]),e("div",as,[f(Le,{products:d.products,"featured-count":d.featuredCount},null,8,["products","featured-count"]),f(bt,{products:X.value,onPreview:ae,onEdit:le,onDelete:ne,onAdd:I},null,8,["products"]),f(Bt,{show:a.value,"category-options":t,onClose:u[1]||(u[1]=v=>a.value=!1),onProductAdded:oe,onToast:S},null,8,["show"]),f(Ht,{show:h.value,product:o.value,"category-options":t,onClose:u[2]||(u[2]=v=>h.value=!1),onProductUpdated:re,onToast:S},null,8,["show","product"]),f(es,{show:g.value,product:s.value,processing:P.value,onClose:u[3]||(u[3]=v=>g.value=!1),onDeleteConfirmed:ie},null,8,["show","product","processing"]),f(pe,{show:i.value,product:C.value,"is-admin":!0,onClose:u[4]||(u[4]=v=>i.value=!1)},null,8,["show","product"])])])],64))}};export{cs as default};
