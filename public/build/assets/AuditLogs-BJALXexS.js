import{c as n,a as t,o as r,y as P,z as Y,r as M,b as d,u as i,h as Z,w as x,l as N,t as o,p as f,v as k,q as A,F as b,g as w,f as C,n as _,s as q,d as J,i as K}from"./app-D0xPLT9-.js";import{r as Q}from"./ArrowLeftIcon-BJZCPtQh.js";import{r as R}from"./ClockIcon-DfyM3Oth.js";import{r as W}from"./EyeIcon-DfGVvect.js";import{Y as X,h as B,G as tt,S as et}from"./transition-m1SwOeQ-.js";function st(g,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}function lt(g,u){return r(),n("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})])}const ot={class:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50"},at={class:"bg-white border-b border-slate-200 shadow-sm"},rt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},nt={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},it={class:"flex items-center gap-3 sm:gap-4"},dt={class:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-slate-50 rounded-lg border border-slate-200 self-start sm:self-auto"},ut={class:"text-xs sm:text-sm font-medium text-slate-700 whitespace-nowrap"},ct={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},mt={class:"bg-white rounded-xl shadow-lg border border-slate-200 p-6 mb-6","data-aos":"fade-up"},pt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4"},xt={class:"xl:col-span-2"},ft={class:"relative"},bt=["value"],gt=["value"],vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4"},ht={class:"bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden","data-aos":"fade-up","data-aos-delay":"100"},wt={class:"overflow-x-auto"},_t={class:"w-full"},yt={class:"divide-y divide-slate-200"},kt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm font-medium text-slate-900"},Ct={class:"text-xs text-slate-500"},St={class:"px-6 py-4 whitespace-nowrap"},Tt={class:"flex items-center"},Dt={class:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center text-white font-semibold text-sm"},Lt={class:"ml-3"},Ut={class:"text-sm font-medium text-slate-900"},jt={class:"text-xs text-slate-500"},Vt={class:"px-6 py-4 whitespace-nowrap"},$t={class:"px-6 py-4"},Mt={class:"text-sm text-slate-900 max-w-md truncate"},Nt={class:"px-6 py-4 whitespace-nowrap"},Bt={class:"text-sm text-slate-600 font-mono"},Ft={class:"px-6 py-4 whitespace-nowrap text-center"},Ht=["onClick"],It={key:0},zt={colspan:"6",class:"px-6 py-12 text-center"},Et={key:0,class:"px-6 py-4 border-t border-slate-200 bg-slate-50"},Ot={class:"flex items-center justify-between"},Gt={class:"text-sm text-slate-600"},Pt={class:"flex gap-2"},Yt=["innerHTML"],Zt={class:"fixed inset-0 overflow-y-auto"},qt={class:"flex min-h-full items-center justify-center p-4"},Jt={key:0,class:"p-6 space-y-4"},Kt={class:"grid grid-cols-2 gap-4"},Qt={class:"text-slate-900 font-mono"},Rt={class:"text-slate-900"},Wt={class:"text-slate-900"},Xt={class:"text-slate-900 font-mono"},te={class:"text-slate-900"},ee={class:"col-span-2"},se={class:"text-slate-900 mt-1"},le={class:"px-6 py-4 bg-slate-50 rounded-b-xl flex justify-end"},ue={__name:"AuditLogs",props:{logs:Object,users:Array,actionTypes:Array,filters:Object},setup(g){var D,L,U,j,V,$;const u=g,c=P(()=>!u.logs||!u.logs.data?{data:[],total:0,from:0,to:0,links:[]}:u.logs),a=Y({search:((D=u.filters)==null?void 0:D.search)||"",user_id:((L=u.filters)==null?void 0:L.user_id)||"",action:((U=u.filters)==null?void 0:U.action)||"",date_from:((j=u.filters)==null?void 0:j.date_from)||"",date_to:((V=u.filters)==null?void 0:V.date_to)||"",per_page:(($=u.filters)==null?void 0:$.per_page)||50}),h=M(!1),m=M(null);let S=null;const F=()=>{clearTimeout(S),S=setTimeout(()=>{p()},500)},p=()=>{q.get("/admin/logs",a,{preserveState:!0,preserveScroll:!0})},H=()=>{Object.keys(a).forEach(l=>{l==="per_page"?a[l]=50:a[l]=""}),p()},I=l=>{m.value=l,h.value=!0},z=l=>new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),E=l=>new Date(l).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),O=l=>new Date(l).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),G=l=>l!=null&&l.name?l.name.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"S",T=l=>{const e="inline-flex items-center px-2.5 py-1 text-xs font-semibold rounded-full",s=(l==null?void 0:l.toLowerCase())||"";return s.includes("create")||s.includes("add")?`${e} bg-green-100 text-green-800`:s.includes("update")||s.includes("edit")?`${e} bg-blue-100 text-blue-800`:s.includes("delete")||s.includes("remove")?`${e} bg-red-100 text-red-800`:s.includes("login")||s.includes("logout")?`${e} bg-purple-100 text-purple-800`:`${e} bg-slate-100 text-slate-800`};return(l,e)=>(r(),n(b,null,[d(i(Z),{title:"Audit Logs"}),t("div",ot,[t("div",at,[t("div",rt,[t("div",nt,[t("div",it,[d(i(N),{href:"/admin/dashboard",class:"p-2 hover:bg-slate-100 rounded-lg transition-colors flex-shrink-0"},{default:x(()=>[d(i(Q),{class:"w-5 h-5 sm:w-6 sm:h-6 text-slate-600"})]),_:1}),e[8]||(e[8]=t("div",{class:"min-w-0"},[t("h1",{class:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent"}," Audit Logs "),t("p",{class:"mt-1 text-sm sm:text-base text-slate-600"},"Monitor system activities")],-1))]),t("div",dt,[d(i(R),{class:"w-4 h-4 sm:w-5 sm:h-5 text-slate-400 flex-shrink-0"}),t("span",ut,"Total: "+o(c.value.total||0),1)])])])]),t("div",ct,[t("div",mt,[t("div",pt,[t("div",xt,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Search",-1)),t("div",ft,[d(i(lt),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>a.search=s),type:"text",placeholder:"Search descriptions...",class:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onInput:F},null,544),[[k,a.search]])])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"User",-1)),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>a.user_id=s),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:p},[e[10]||(e[10]=t("option",{value:""},"All Users",-1)),(r(!0),n(b,null,w(g.users,s=>(r(),n("option",{key:s.id,value:s.id},o(s.name),9,bt))),128))],544),[[A,a.user_id]])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Action",-1)),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.action=s),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:p},[e[12]||(e[12]=t("option",{value:""},"All Actions",-1)),(r(!0),n(b,null,w(g.actionTypes,s=>(r(),n("option",{key:s,value:s},o(s),9,gt))),128))],544),[[A,a.action]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Show",-1)),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>a.per_page=s),class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:p},[...e[14]||(e[14]=[t("option",{value:25},"25",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)])],544),[[A,a.per_page]])])]),t("div",vt,[t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"From Date",-1)),f(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>a.date_from=s),type:"date",class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:p},null,544),[[k,a.date_from]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"To Date",-1)),f(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>a.date_to=s),type:"date",class:"w-full px-4 py-2.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",onChange:p},null,544),[[k,a.date_to]])])]),t("div",{class:"mt-4 flex justify-end"},[t("button",{onClick:H,class:"px-4 py-2 text-sm font-medium text-slate-700 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors"}," Clear Filters ")])]),t("div",ht,[t("div",wt,[t("table",_t,[e[21]||(e[21]=t("thead",{class:"bg-gradient-to-r from-slate-50 to-slate-100 border-b border-slate-200"},[t("tr",null,[t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Timestamp "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," User "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Action "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Description "),t("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-700 uppercase tracking-wider"}," IP Address "),t("th",{class:"px-6 py-4 text-center text-xs font-semibold text-slate-700 uppercase tracking-wider"}," Details ")])],-1)),t("tbody",yt,[(r(!0),n(b,null,w(c.value.data,s=>{var v,y;return r(),n("tr",{key:s.id,class:"hover:bg-slate-50 transition-colors"},[t("td",kt,[t("div",At,o(z(s.created_at)),1),t("div",Ct,o(E(s.created_at)),1)]),t("td",St,[t("div",Tt,[t("div",Dt,o(G(s.user)),1),t("div",Lt,[t("div",Ut,o(((v=s.user)==null?void 0:v.name)||"System"),1),t("div",jt,o(((y=s.user)==null?void 0:y.email)||"N/A"),1)])])]),t("td",Vt,[t("span",{class:_(T(s.action))},o(s.action),3)]),t("td",$t,[t("div",Mt,o(s.description),1)]),t("td",Nt,[t("div",Bt,o(s.ip_address||"N/A"),1)]),t("td",Ft,[t("button",{onClick:oe=>I(s),class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-blue-700 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors"},[d(i(W),{class:"w-4 h-4 mr-1"}),e[18]||(e[18]=J(" View ",-1))],8,Ht)])])}),128)),!c.value.data||c.value.data.length===0?(r(),n("tr",It,[t("td",zt,[d(i(st),{class:"mx-auto w-12 h-12 text-slate-400 mb-4"}),e[19]||(e[19]=t("p",{class:"text-slate-600 font-medium"},"No audit logs found",-1)),e[20]||(e[20]=t("p",{class:"text-slate-500 text-sm mt-2"},"Try adjusting your filters",-1))])])):C("",!0)])])]),c.value.data&&c.value.data.length>0?(r(),n("div",Et,[t("div",Ot,[t("div",Gt," Showing "+o(c.value.from)+" to "+o(c.value.to)+" of "+o(c.value.total)+" results ",1),t("div",Pt,[(r(!0),n(b,null,w(c.value.links,s=>(r(),n(b,{key:s.label},[s.url?(r(),K(i(N),{key:0,href:s.url,class:_(["px-4 py-2 text-sm font-medium rounded-lg transition-all",s.active?"bg-blue-600 text-white shadow-lg shadow-blue-500/50":"bg-white text-slate-700 hover:bg-slate-100 border border-slate-300"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(r(),n("span",{key:1,class:_("px-4 py-2 text-sm font-medium rounded-lg transition-all bg-slate-100 text-slate-400 cursor-not-allowed"),innerHTML:s.label},null,8,Yt))],64))),128))])])])):C("",!0)])])]),d(i(et),{show:h.value,as:"template"},{default:x(()=>[d(i(X),{onClose:e[7]||(e[7]=s=>h.value=!1),class:"relative z-50"},{default:x(()=>[d(i(B),{enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:x(()=>[...e[22]||(e[22]=[t("div",{class:"fixed inset-0 bg-black/30 backdrop-blur-sm"},null,-1)])]),_:1}),t("div",Zt,[t("div",qt,[d(i(B),{enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:x(()=>[d(i(tt),{class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl"},{default:x(()=>{var s,v;return[e[30]||(e[30]=t("div",{class:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4 rounded-t-xl"},[t("h3",{class:"text-lg font-semibold text-white"},"Audit Log Details")],-1)),m.value?(r(),n("div",Jt,[t("div",Kt,[t("div",null,[e[23]||(e[23]=t("label",{class:"text-sm font-medium text-slate-600"},"ID",-1)),t("p",Qt,o(m.value.id),1)]),t("div",null,[e[24]||(e[24]=t("label",{class:"text-sm font-medium text-slate-600"},"Action",-1)),t("p",null,[t("span",{class:_(T(m.value.action))},o(m.value.action),3)])]),t("div",null,[e[25]||(e[25]=t("label",{class:"text-sm font-medium text-slate-600"},"User",-1)),t("p",Rt,o(((s=m.value.user)==null?void 0:s.name)||"System"),1)]),t("div",null,[e[26]||(e[26]=t("label",{class:"text-sm font-medium text-slate-600"},"Email",-1)),t("p",Wt,o(((v=m.value.user)==null?void 0:v.email)||"N/A"),1)]),t("div",null,[e[27]||(e[27]=t("label",{class:"text-sm font-medium text-slate-600"},"IP Address",-1)),t("p",Xt,o(m.value.ip_address||"N/A"),1)]),t("div",null,[e[28]||(e[28]=t("label",{class:"text-sm font-medium text-slate-600"},"Timestamp",-1)),t("p",te,o(O(m.value.created_at)),1)]),t("div",ee,[e[29]||(e[29]=t("label",{class:"text-sm font-medium text-slate-600"},"Description",-1)),t("p",se,o(m.value.description),1)])])])):C("",!0),t("div",le,[t("button",{onClick:e[6]||(e[6]=y=>h.value=!1),class:"px-4 py-2 text-sm font-medium text-slate-700 bg-white hover:bg-slate-100 rounded-lg border border-slate-300 transition-colors"}," Close ")])]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}};export{ue as default};
