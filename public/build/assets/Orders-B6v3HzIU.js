import{c as d,a as t,o,F as f,r as _,f as O,n as g,C,t as i,e as k,b as p,u as b,d as Q,p as v,y,h as I,w as U,l as j,s as A}from"./app-B-e4HDZA.js";import{_ as B}from"./ConfirmModal-Di7L2V6O.js";import{a as L,b as N,r as M}from"./XMarkIcon-DkpJG58I.js";import{r as P}from"./TruckIcon-DNlUVDBz.js";import{r as w}from"./ClockIcon-BxBY2vLP.js";import{r as V}from"./ArrowLeftIcon-Ba2En1KE.js";function D(c,l){return o(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}const F={class:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 mb-6","data-aos":"fade-up"},T={class:"text-sm font-medium text-zinc-600 capitalize"},q={__name:"OrderStats",props:{orderStats:Object},setup(c){function l(e){return{pending:w,processing:P,completed:N,cancelled:L}[e]||w}function n(e){return{"border-blue-300":e==="pending","border-emerald-300":e==="completed","border-red-300":e==="cancelled","border-primary-300":e==="processing"}}function s(e){return{"text-blue-500":e==="pending","text-emerald-500":e==="completed","text-red-600":e==="cancelled","text-primary-500":e==="processing"}}function u(e){return{"text-blue-700":e==="pending","text-emerald-700":e==="completed","text-red-600":e==="cancelled","text-primary-700":e==="processing"}}return(e,h)=>(o(),d("div",F,[(o(),d(f,null,_(["pending","completed","cancelled","processing"],m=>t("div",{key:m,class:g(["bg-white rounded-xl shadow-lg p-6 border-2 flex flex-col items-center justify-center",n(m)])},[(o(),O(C(l(m)),{class:g(["w-8 h-8 mb-2",s(m)])},null,8,["class"])),t("span",{class:g(["text-2xl font-extrabold mb-1",u(m)])},i(c.orderStats[m]),3),t("span",T,i(m),1)],2)),64))]))}},E={class:"bg-white rounded-2xl shadow-lg border border-zinc-200 mb-6","data-aos":"fade-up","data-aos-delay":"200"},Y={class:"p-6 border-b border-zinc-200"},G={class:"flex flex-col md:flex-row gap-4"},H={class:"flex-1"},J=["value"],K={__name:"OrderFilters",props:{searchQuery:String},emits:["update:searchQuery"],setup(c){return(l,n)=>(o(),d("div",E,[t("div",Y,[t("div",G,[t("div",H,[t("input",{value:c.searchQuery,onInput:n[0]||(n[0]=s=>l.$emit("update:searchQuery",s.target.value)),type:"text",placeholder:"Search by order ID, customer name, or email...",class:"w-full px-4 py-3 rounded-xl border-2 border-zinc-200 focus:border-primary-500 focus:ring focus:ring-primary-200 transition-all"},null,40,J)])])])]))}},R={class:"divide-y divide-zinc-200"},W={key:0,class:"p-12 text-center"},X={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},Z={class:"font-bold text-lg text-zinc-900"},ee={class:"text-xs text-zinc-500"},te={class:"text-xs text-zinc-400"},se={class:"flex flex-col items-end gap-2"},re={class:"relative"},ae=["value","onChange"],le=["value"],ne={class:"text-base font-bold text-emerald-700"},oe={class:"bg-zinc-50 rounded-lg p-3 mt-2"},de={class:"flex-1 min-w-0"},ie={class:"font-medium text-zinc-900"},ce={class:"text-xs text-zinc-500"},ue={class:"text-xs text-zinc-500"},me={class:"flex justify-end mt-2"},pe={class:"font-bold text-zinc-900"},xe={class:"text-emerald-700"},fe={__name:"OrderList",props:{filteredOrders:Array,statusOptions:Array},emits:["updateOrderStatus"],setup(c){return(l,n)=>(o(),d("div",R,[c.filteredOrders.length===0?(o(),d("div",W,[p(b(M),{class:"w-16 h-16 text-zinc-300 mx-auto mb-4"}),n[0]||(n[0]=t("p",{class:"text-xl font-semibold text-zinc-400"},"No orders found",-1))])):k("",!0),(o(!0),d(f,null,_(c.filteredOrders,s=>{var u;return o(),d("div",{key:s.id,class:"p-4 sm:p-6 mb-4 bg-white rounded-xl shadow border border-zinc-100 flex flex-col gap-3"},[t("div",X,[t("div",null,[t("div",Z,"Order #"+i(s.id),1),t("div",ee,i((u=s.user)==null?void 0:u.name),1),t("div",te,i(s.created_at),1)]),t("div",se,[t("div",re,[t("select",{value:s.status,onChange:e=>l.$emit("updateOrderStatus",s.id,e.target.value),class:g(["appearance-none pr-8 pl-4 py-2 rounded-lg border text-sm font-bold focus:ring-2 focus:ring-primary-500 transition-all",s.status==="pending"?"bg-amber-100 text-amber-700 border-amber-300":"",s.status==="completed"?"bg-emerald-100 text-emerald-700 border-emerald-300":"",s.status==="cancelled"?"bg-red-100 text-red-700 border-red-300":"",s.status==="processing"?"bg-blue-100 text-blue-700 border-blue-300":""])},[(o(!0),d(f,null,_(c.statusOptions.filter(e=>e.value!=="all"),e=>(o(),d("option",{key:e.value,value:e.value},i(e.label),9,le))),128))],42,ae),p(b(D),{class:g(["w-5 h-5 absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",[s.status==="pending"?"text-amber-500":"",s.status==="completed"?"text-emerald-500":"",s.status==="cancelled"?"text-red-500":"",s.status==="processing"?"text-blue-500":""]])},null,8,["class"])]),t("div",ne,"₱"+i(s.total),1)])]),t("div",oe,[n[2]||(n[2]=t("div",{class:"font-semibold text-zinc-700 mb-2"},"Products",-1)),(o(!0),d(f,null,_(s.items,e=>(o(),d("div",{key:e.id,class:"flex flex-col sm:flex-row sm:items-center justify-between gap-1 sm:gap-4 border-b border-zinc-100 last:border-b-0 py-2"},[t("div",de,[t("div",ie,i(e.product_name||e.name||e.title||"Unnamed Product"),1),t("div",ce,"x"+i(e.quantity),1)]),t("div",ue,"₱"+i(e.price),1)]))),128)),t("div",me,[t("div",pe,[n[1]||(n[1]=Q("Total: ",-1)),t("span",xe,"₱"+i(s.total),1)])])])])}),128))]))}},ge={class:"min-h-screen bg-gradient-to-br from-zinc-50 to-zinc-100"},be={class:"bg-white shadow-lg border-b border-zinc-200 sticky top-0 z-40"},ve={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6"},_e={class:"flex items-center gap-3 sm:gap-4"},he={class:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8"},Ce={__name:"Orders",props:{orders:Array},setup(c){const l=c,n=v("all"),s=v(""),u=v(!1),e=v({orderId:null,newStatus:""}),h=[{value:"all",label:"All Orders",color:"zinc"},{value:"pending",label:"Pending",color:"amber"},{value:"processing",label:"Processing",color:"blue"},{value:"completed",label:"Completed",color:"emerald"},{value:"cancelled",label:"Cancelled",color:"red"}],m=y(()=>{let r=l.orders;if(n.value!=="all"&&(r=r.filter(a=>a.status===n.value)),s.value){const a=s.value.toLowerCase();r=r.filter(x=>x.id.toString().includes(a)||x.user.name.toLowerCase().includes(a)||x.user.email.toLowerCase().includes(a))}return r}),$=y(()=>({total:l.orders.length,pending:l.orders.filter(r=>r.status==="pending").length,processing:l.orders.filter(r=>r.status==="processing").length,completed:l.orders.filter(r=>r.status==="completed").length,cancelled:l.orders.filter(r=>r.status==="cancelled").length,revenue:l.orders.reduce((r,a)=>r+(a.total||0),0)}));function z(r,a){e.value={orderId:r,newStatus:a},u.value=!0}function S(){A.patch(`/admin/orders/${e.value.orderId}/status`,{status:e.value.newStatus},{preserveScroll:!0,preserveState:!0,onSuccess:()=>{u.value=!1}})}return(r,a)=>(o(),d(f,null,[p(b(I),{title:"Order Management"}),t("div",ge,[t("div",be,[t("div",ve,[t("div",_e,[p(b(j),{href:r.route("admin.dashboard"),class:"p-2 hover:bg-slate-100 rounded-lg transition-colors flex-shrink-0"},{default:U(()=>[p(b(V),{class:"w-5 h-5 sm:w-6 sm:h-6 text-slate-600"})]),_:1},8,["href"]),a[2]||(a[2]=t("div",{class:"min-w-0 flex-1"},[t("h1",{class:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-primary-600 to-emerald-600 bg-clip-text text-transparent"},"Order Management"),t("p",{class:"mt-1 text-sm sm:text-base text-slate-600"},"Manage and track customer orders")],-1))])])]),t("main",he,[p(q,{"order-stats":$.value},null,8,["order-stats"]),p(K,{searchQuery:s.value,"onUpdate:searchQuery":a[0]||(a[0]=x=>s.value=x)},null,8,["searchQuery"]),p(fe,{"filtered-orders":m.value,"status-options":h,onUpdateOrderStatus:z},null,8,["filtered-orders"])]),p(B,{show:u.value,title:"Update Order Status",message:`Are you sure you want to change the status of Order #${e.value.orderId} to ${e.value.newStatus}?`,"confirm-text":"Yes, Update","cancel-text":"Cancel",type:"info",onClose:a[1]||(a[1]=x=>u.value=!1),onConfirm:S},null,8,["show","message"])])],64))}};export{Ce as default};
